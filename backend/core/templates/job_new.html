{% extends "base.html" %}

{% block head_extra %}
<link href="{{ url_for('static', filename='css/quill.snow.css') }}" rel="stylesheet">
<style>
  .card { border:1px solid #e5e7eb; border-radius:12px; background:#fff; }
  .btn { padding:8px 12px; border:1px solid #e5e7eb; border-radius:8px; cursor:pointer; background:#f9fafb; }
  .btn.primary { background:#eef2ff; border-color:#c7d2fe; }
  .form-shell { max-width: 900px; margin: 0 auto; background: #fff; padding: 16px; border-radius: 8px; border:1px solid #e5e7eb; }
  .grid { display:grid; grid-template-columns: 220px 1fr; gap: 10px 14px; align-items: center; }
  .grid .label { align-self: center; }
  label.required::after { content:" *"; color:#b91c1c; }
  .muted { color:#6b7280; }
  .err { color:#b91c1c; margin-top:4px; }
  .hidden { display:none; }
  input[type="text"], input[type="url"], textarea, select { width: 100%; box-sizing: border-box; padding: 8px; border:1px solid #d1d5db; border-radius:6px; }
  .help-nuggets { margin-top: 4px; display:flex; flex-wrap: wrap; gap:6px; }
  .help-nuggets .nugget { font-size: 12px; color:#6b7280; border:1px dashed #cbd5e1; padding:2px 6px; border-radius:9999px; cursor:pointer; }
  .actions-top { display:flex; gap:8px; margin-bottom:6px; align-items:center; }
  .actions-top a[aria-disabled="true"] { pointer-events:none; opacity:.6; }
  .loc-row { display:grid; grid-template-columns: minmax(0,1fr) minmax(0,1fr) max-content; gap:8px; align-items:center; margin-bottom:8px; }
  .loc-row input { width:100%; min-width:0; }
  .loc-actions { display:flex; gap:8px; }
  .section-subtle { padding:10px; border:1px dashed #e5e7eb; border-radius:8px; background:#fafafa; }
  .ql-toolbar.ql-snow { border:1px solid #e5e7eb; border-radius:8px 8px 0 0; }
  .ql-container.ql-snow { border:1px solid #e5e7eb; border-top:0; border-radius:0 0 8px 8px; min-height:180px; }
  .ql-editor { min-height:160px; }
  .desc-meta { display:flex; justify-content:space-between; align-items:center; font-size:12px; color:#6b7280; margin-top:6px; }
  .desc-count.over { color:#b91c1c; font-weight:600; }

  .actions-top { display:flex; gap:8px; margin-bottom:6px; align-items:center; }
  .actions-top .spacer { flex:1; } /* pushes the banner to the right */

  .inline-banner {
    /* reserve height so nothing jumps when shown */
    min-height: 28px;
    display:flex; align-items:center; gap:8px;
    margin-left:auto; /* stay at the right side */
    padding:6px 10px;
    border:1px solid #fde68a;
    background:#fffbeb;
    color:#7c2d12;
    border-radius:8px;
    font-size:13px;
    line-height:1.2;
    opacity:0; visibility:hidden; transition:opacity .2s ease;
    white-space:nowrap;
  }
  .inline-banner.show { opacity:1; visibility:visible; }

  .inline-banner a { text-decoration:underline; }  
</style>
{% endblock %}

{% block content %}
{% set mode = 'create' %}
{% set disable_ats = false %}
{% set initial_json = {} %}
{% set submit_label = 'Create' %}
{% set cancel_href = url_for('index') %}
{% include "jobs/_job_form.html" %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    window.initJobForm({
      mode: 'create',
      submitUrl: '/ui/jobs',
      method: 'POST',
      disableAts: false
    });
  });
  // expose blank initial for consistency
  window.__JOB_FORM_CTX__ = { mode: "create", initial: {}, disableAts: false };
  // Add default remoteType preselect for create
  (function(){ const r = document.querySelector('input[name="remoteType"][value="Unknown"]'); if (r) r.checked = true; })();
</script>
{% endblock %}